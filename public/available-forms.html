<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Available Forms - E-Waste Pre-Disposal System</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', sans-serif;
    }

    body {
      background: #f8f9fa;
      color: #1d1d1f;
    }

    /* Header */
    header {
      background: white;
      padding: 15px 40px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .logo-section {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
      text-decoration: none;
    }

    .logo-icon {
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, #52c234 0%, #34c759 100%);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      box-shadow: 0 4px 12px rgba(52, 199, 89, 0.3);
    }

    .logo-text {
      font-size: 24px;
      font-weight: 700;
      color: #1d1d1f;
    }

    .logo-text span {
      color: #52c234;
    }

    .nav-links {
      display: flex;
      gap: 30px;
      align-items: center;
    }

    .nav-links a {
      text-decoration: none;
      color: #1d1d1f;
      font-size: 15px;
      font-weight: 500;
      transition: all 0.3s;
      opacity: 0.8;
    }

    .nav-links a:hover {
      opacity: 1;
      color: #34c759;
    }

    /* Hero Banner */
    .hero-banner {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 80px 40px;
      position: relative;
      overflow: hidden;
      margin-bottom: 60px;
    }

    .hero-content {
      max-width: 1400px;
      margin: 0 auto;
      position: relative;
      z-index: 2;
      text-align: center;
    }

    .hero-content h1 {
      font-size: 56px;
      font-weight: 700;
      color: white;
      margin-bottom: 20px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    }

    .hero-content p {
      font-size: 24px;
      color: white;
      opacity: 0.95;
      max-width: 800px;
      margin: 0 auto;
    }

    /* Floating e-waste icons */
    .ewaste-characters {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
    }

    .character {
      position: absolute;
      font-size: 80px;
      animation: float 3s ease-in-out infinite;
      filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
      opacity: 0.3;
    }

    .char1 { top: 10%; left: 5%; animation-delay: 0s; }
    .char2 { top: 20%; right: 8%; animation-delay: 0.5s; }
    .char3 { bottom: 15%; left: 10%; animation-delay: 1s; }
    .char4 { bottom: 25%; right: 15%; animation-delay: 1.5s; }
    .char5 { top: 50%; left: 3%; animation-delay: 2s; }
    .char6 { top: 60%; right: 5%; animation-delay: 2.5s; }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-20px); }
    }

    /* Container */
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 40px 80px;
    }

    /* Section Header */
    .section-header {
      text-align: center;
      margin-bottom: 50px;
    }

    .section-header h2 {
      font-size: 40px;
      font-weight: 700;
      color: #1d1d1f;
      margin-bottom: 10px;
    }

    .section-header p {
      font-size: 18px;
      color: #6e6e73;
    }

    /* Forms Grid */
    .forms-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
      gap: 30px;
      margin-bottom: 60px;
    }

    .form-card {
      background: white;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      transition: all 0.4s;
      cursor: pointer;
      position: relative;
    }

    .form-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #667eea, #764ba2);
      transform: scaleX(0);
      transition: transform 0.3s;
    }

    .form-card:hover::before {
      transform: scaleX(1);
    }

    .form-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
    }

    .form-card-image {
      height: 200px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 80px;
      position: relative;
      overflow: hidden;
    }

    .form-card-image::after {
      content: '';
      position: absolute;
      top: -50%;
      right: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%);
      animation: rotateGradient 10s linear infinite;
    }

    @keyframes rotateGradient {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .form-badge {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.95);
      color: #34c759;
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      z-index: 1;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .form-card-content {
      padding: 30px;
    }

    .form-card h3 {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 12px;
      color: #1d1d1f;
      letter-spacing: -0.3px;
    }

    .form-card p {
      color: #6e6e73;
      font-size: 15px;
      line-height: 1.6;
      margin-bottom: 20px;
    }

    .form-meta {
      display: flex;
      gap: 20px;
      font-size: 13px;
      color: #86868b;
      margin-bottom: 20px;
      padding-top: 20px;
      border-top: 1px solid #f0f0f0;
    }

    .form-meta span {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .form-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      color: #667eea;
      font-size: 15px;
      font-weight: 600;
      text-decoration: none;
      transition: all 0.3s;
    }

    .form-link:hover {
      gap: 12px;
      color: #764ba2;
    }

    /* Loading & Empty States */
    .loading, .empty-state {
      text-align: center;
      padding: 80px 20px;
      grid-column: 1/-1;
    }

    .loading {
      color: #6e6e73;
      font-size: 18px;
    }

    .empty-state-icon {
      font-size: 80px;
      opacity: 0.3;
      margin-bottom: 24px;
    }

    .empty-state h3 {
      font-size: 28px;
      font-weight: 700;
      color: #1d1d1f;
      margin-bottom: 12px;
    }

    .empty-state p {
      font-size: 16px;
      color: #6e6e73;
    }

    /* Info Banner */
    .info-banner {
      background: white;
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.1);
      margin-bottom: 60px;
      border-left: 5px solid #667eea;
    }

    .info-banner h2 {
      font-size: 28px;
      font-weight: 700;
      color: #1d1d1f;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .info-banner p {
      font-size: 17px;
      color: #6e6e73;
      line-height: 1.6;
    }

    /* Back Button */
    .back-button {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
      transition: all 0.3s;
      z-index: 100;
      border: none;
      text-decoration: none;
    }

    .back-button:hover {
      transform: scale(1.1) rotate(-15deg);
      box-shadow: 0 12px 35px rgba(102, 126, 234, 0.6);
    }

    /* Footer */
    footer {
      background: #1d1d1f;
      color: white;
      padding: 40px;
      text-align: center;
      margin-top: 80px;
    }

    footer p {
      opacity: 0.8;
      font-size: 14px;
      line-height: 1.8;
    }

    /* Responsive */
    @media (max-width: 768px) {
      header {
        padding: 15px 20px;
        flex-direction: column;
        gap: 15px;
      }

      .hero-content h1 {
        font-size: 36px;
      }

      .hero-content p {
        font-size: 18px;
      }

      .forms-grid {
        grid-template-columns: 1fr;
      }

      .section-header h2 {
        font-size: 32px;
      }

      .character {
        font-size: 50px;
      }

      .container {
        padding: 0 20px 60px;
      }
    }
  </style>
</head>
<body>

  <!-- Header -->
  <header>
    <div class="logo-section">
      <a href="customer-dashboard.html" class="logo">
        <div class="logo-icon">‚ôªÔ∏è</div>
        <div class="logo-text">E<span>Cycle</span></div>
      </a>
    </div>
  </header>

  <!-- Hero Banner -->
  <div class="hero-banner">
    <div class="ewaste-characters">
      <div class="character char1">üì±</div>
      <div class="character char2">üíª</div>
      <div class="character char3">üñ•Ô∏è</div>
      <div class="character char4">‚åö</div>
      <div class="character char5">üéß</div>
      <div class="character char6">üì∑</div>
    </div>
    <div class="hero-content">
      <h1>üìã Available Disposal Assessment Forms</h1>
      <p>Choose the right form for your e-waste disposal needs and help us create a sustainable future</p>
    </div>
  </div>

  <!-- Main Container -->
  <div class="container">

    <!-- Info Banner -->
    <div class="info-banner">
      <h2>üìù How It Works</h2>
      <p>Select a form below that matches your e-waste disposal needs. Fill it out with accurate information about your device, and our AI system will analyze it to provide you with the best recommendation for disposal, repair, or recycling.</p>
    </div>

    <!-- Section Header -->
    <div class="section-header">
      <h2>Published Forms</h2>
      <p>All available assessment forms ready for submission</p>
    </div>

    <!-- Forms Grid -->
    <div class="forms-grid" id="forms-container">
      <div class="loading">‚è≥ Loading available forms...</div>
    </div>

  </div>

  <!-- Back Button -->
  <a href="customer-dashboard.html" class="back-button" title="Back to Home">üè†</a>

  <!-- Footer -->
  <footer>
    <p>¬© 2025 Department of Creative AI, Universiti Teknologi Malaysia</p>
    <p>creativeai@utm.my ‚Ä¢ Kuala Lumpur, Malaysia</p>
  </footer>

  <script>
    const API_URL = 'http://localhost:4000/api';

    async function loadPublishedForms() {
      const container = document.getElementById('forms-container');
      
      try {
        const response = await fetch(`${API_URL}/forms`);
        const forms = await response.json();
        const publishedForms = forms.filter(form => form.published === 1 || form.published === true);

        if (publishedForms.length === 0) {
          container.innerHTML = `
            <div class="empty-state">
              <div class="empty-state-icon">üìã</div>
              <h3>No forms available yet</h3>
              <p>Check back soon for new disposal request forms.</p>
            </div>
          `;
          return;
        }

        const icons = ['üì±', 'üíª', 'üñ•Ô∏è', '‚åö', 'üéß', 'üì∑', 'üñ®Ô∏è', '‚ö°'];
        container.innerHTML = publishedForms.map((form, i) => `
          <div class="form-card" onclick="window.location.href='dynamic-form.html?id=${form.id}'">
            <div class="form-card-image">
              ${icons[i % icons.length]}
              <div class="form-badge">‚úì Available</div>
            </div>
            <div class="form-card-content">
              <h3>${form.title}</h3>
              <p>${form.description || 'Submit your disposal request with this form.'}</p>
              <div class="form-meta">
                <span>üìù ${form.fields.length} fields</span>
                <span>üïê ${getFormDuration(form.fields.length)}</span>
              </div>
              <a href="dynamic-form.html?id=${form.id}" class="form-link" onclick="event.stopPropagation()">
                Fill out form <span>‚Üí</span>
              </a>
            </div>
          </div>
        `).join('');

      } catch (error) {
        console.error('Error:', error);
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">‚ö†Ô∏è</div>
            <h3>Unable to load forms</h3>
            <p>Please check your connection and try again.</p>
          </div>
        `;
      }
    }

    function getFormDuration(fieldCount) {
      if (fieldCount <= 3) return '2 min';
      if (fieldCount <= 6) return '5 min';
      if (fieldCount <= 10) return '8 min';
      return '10+ min';
    }

    window.addEventListener('DOMContentLoaded', loadPublishedForms);
  </script>

</body>
</html>